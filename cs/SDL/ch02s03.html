<?xml version="1.0" encoding="utf-8" standalone="no"?><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Installing SDL_image</title><link href="epub.css" rel="stylesheet" type="text/css"/><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"/>
<meta name="Adept.resource" value="urn:uuid:db9d31f0-c605-45e5-bd7f-8555ec3e9527"/></head><body id="page"><div class="section" title="Installing SDL_image"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Installing SDL_image</h1></div></div></div><p>So far we have only <a class="indexterm" id="id137"/>been loading BMP image files. This is all that SDL supports without any extensions. We can use <code class="literal">SDL_image</code> to enable us to load many different image file types such as BMP, GIF, JPEG, LBM, PCX, PNG, PNM, TGA, TIFF, WEBP, XCF, XPM, and XV. First we will need to clone the latest build of <code class="literal">SDL_image</code> to ensure it will work with SDL 2.0:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open up the <code class="literal">TortoiseHg</code> workbench and use <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span> to clone a new repository.</li><li class="listitem">The repository for SDL_image is listed on <a class="ulink" href="http://www.libsdl.org/projects/SDL_image/">http://www.libsdl.org/projects/SDL_image/</a> and <a class="ulink" href="http://hg.libsdl.org/SDL_image/">http://hg.libsdl.org/SDL_image/</a>. So let's go ahead and type that into the <span class="strong"><strong>Source</strong></span> box.</li><li class="listitem">Our destination will be a new directory, <code class="literal">C:\SDL2_image</code>. After typing this into the <span class="strong"><strong>Destination</strong></span> box, hit <span class="strong"><strong>clone</strong></span> and wait for it to complete.</li><li class="listitem">Once you have created this folder, navigate to our <code class="literal">C:\SDL2_image</code> cloned repository. Open up the <code class="literal">VisualC</code> folder and then open the <code class="literal">SDL_image_VS2010</code> VC++ project with Visual Studio 2010 express.</li><li class="listitem">Right-click on the <code class="literal">SDL2_image</code> project and then click on <span class="strong"><strong>Properties</strong></span>. Here we have to include the <code class="literal">SDL.h</code> header file. Change the configuration to <span class="strong"><strong>All Configurations</strong></span>, navigate to <span class="strong"><strong>VC++ Directories</strong></span>, click on the <span class="strong"><strong>Include Directories</strong></span> drop-down, and then on <span class="strong"><strong>&lt;Editâ€¦&gt;</strong></span>. Here we can put in our <code class="literal">C:\SDL2\include\</code> directory.</li><li class="listitem">Next move to <span class="strong"><strong>Library Directories</strong></span> and add our <code class="literal">C:\SDL2\lib\</code> folder. Now navigate to <span class="strong"><strong>Linker</strong></span> | <span class="strong"><strong>Input</strong></span> | <span class="strong"><strong>Additional Dependencies</strong></span> and add <code class="literal">SDL2.lib</code>.</li><li class="listitem">Click on <span class="strong"><strong>OK</strong></span> and we are almost ready to build. We are now using <code class="literal">SDL2.lib</code>, so we can remove the <code class="literal">SDL.lib</code> and the <code class="literal">SDLmain.lib</code> files from the <code class="literal">SDL_image</code> project. Locate <a class="indexterm" id="id138"/>the files in the solution explorer, right-click and then remove the files. Change the build configuration to <span class="strong"><strong>release</strong></span> and then build.</li><li class="listitem">An error about being unable to start the program may appear. Just click on <span class="strong"><strong>OK</strong></span> and we can close the project and continue.</li><li class="listitem">There will now be a <code class="literal">Release</code> folder inside our <code class="literal">C:\SDL2_image\VisualC\</code> folder. Open it and copy the <code class="literal">SDL_image.dll</code> to our game's executable folder.</li><li class="listitem">Next copy the <code class="literal">SDL2_image.lib</code> file into our original <code class="literal">C:\SDL2\lib\</code> directory. Also copy the <code class="literal">SDL_image</code> header from <code class="literal">C:\SDL2_image\</code> to the <code class="literal">C:\SDL2\include\</code> directory.</li><li class="listitem">We just have a few more libraries to get and we are done. Download the <code class="literal">SDL_image-1.2.12-win32.zip</code> file (or the x64 if you are targeting a 64 bit platform) from <a class="ulink" href="http://www.libsdl.org/projects/SDL_image/">http://www.libsdl.org/projects/SDL_image/</a>. Extract all and then copy all of the <code class="literal">.dll</code> files apart from <code class="literal">SDL_image.dll</code> into our game's executable folder.</li><li class="listitem">Open up our game project and go into its properties. Navigate to <span class="strong"><strong>Linker</strong></span> | <span class="strong"><strong>Input</strong></span> | <span class="strong"><strong>Additional Dependencies</strong></span> and add <code class="literal">SDL2_image.lib</code>.<div class="mediaobject"><img alt="Installing SDL_image" src="graphics/6821OT_02_14.jpg"/></div></li><li class="listitem">We have now installed <code class="literal">SDL_image</code> and can start to load all kinds of different image files. Copy the <code class="literal">animate.png</code> and <code class="literal">animate-alpha.png </code>images from the source <a class="indexterm" id="id139"/>downloads to our games assets folder and we can start loading PNG files.</li></ol></div><div class="section" title="Using SDL_image"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec20"/>Using SDL_image</h2></div></div></div><p>So we have the library installed, now how do we use it? It is simple to use SDL_image in place of the regular <a class="indexterm" id="id140"/>SDL image loading. In our case we only need to replace one function and also add <code class="literal">#include &lt;SDL_image.h&gt;</code>.</p><div class="informalexample"><pre class="programlisting">SDL_Surface* pTempSurface = SDL_LoadBMP("assets/animate.bmp");</pre></div><p>The preceding code will be changed as follows:</p><div class="informalexample"><pre class="programlisting">SDL_Surface* pTempSurface = IMG_Load("assets/animate.png");</pre></div><p>We are now loading a <code class="literal">.png</code> image. PNG files are great to work with, they have a small file size and support an alpha channel. Let's perform a test. Change our renderer clear color to red.</p><div class="informalexample"><pre class="programlisting">SDL_SetRenderDrawColor(m_pRenderer, 255,0,0,255);</pre></div><p>You will see that we still have our black background from the image we are using; this is definitely not ideal for our purposes.</p><div class="mediaobject"><img alt="Using SDL_image" src="graphics/6821OT_02_15.jpg"/></div><p>When using PNG files, we can resolve this by using an alpha channel. We remove the background from the<a class="indexterm" id="id141"/> image and then when we load it, SDL will not draw anything from the alpha channel.</p><div class="mediaobject"><img alt="Using SDL_image" src="graphics/6821OT_02_16.jpg"/></div><p>Let's load this image and see how it looks:</p><div class="informalexample"><pre class="programlisting">SDL_Surface* pTempSurface = IMG_Load("assets/animate-alpha.png");</pre></div><p>This is exactly what we want:</p><div class="mediaobject"><img alt="Using SDL_image" src="graphics/6821OT_02_17.jpg"/></div></div></div></body></html>