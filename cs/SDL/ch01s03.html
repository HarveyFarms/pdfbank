<?xml version="1.0" encoding="utf-8" standalone="no"?><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Hello SDL</title><link href="epub.css" rel="stylesheet" type="text/css"/><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"/>
<meta name="Adept.resource" value="urn:uuid:db9d31f0-c605-45e5-bd7f-8555ec3e9527"/></head><body id="page"><div class="section" title="Hello SDL"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Hello SDL</h1></div></div></div><p>We now have an empty project, which links to the SDL library, so it is time to start our SDL development. Click on <span class="strong"><strong>Source Files</strong></span>
<a class="indexterm" id="id28"/> and use the keyboard shortcut <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>A</em></span> to add a new item. Create a C++ file called <code class="literal">main.cpp</code>. After creating this file, copy the following code into the source file:</p><div class="informalexample"><pre class="programlisting">#include&lt;SDL.h&gt;

SDL_Window* g_pWindow = 0;
SDL_Renderer* g_pRenderer = 0;

int main(int argc, char* args[])
{
  // initialize SDL
  if(SDL_Init(SDL_INIT_EVERYTHING) &gt;= 0)
  {
    // if succeeded create our window
    g_pWindow = SDL_CreateWindow("Chapter 1: Setting up SDL", 
    SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED,
    640, 480, 
    SDL_WINDOW_SHOWN);

    // if the window creation succeeded create our renderer
    if(g_pWindow != 0)
    {
      g_pRenderer = SDL_CreateRenderer(g_pWindow, -1, 0);
    }
  }
  else
  {
    return 1; // sdl could not initialize
  }

  // everything succeeded lets draw the window

  // set to black // This function expects Red, Green, Blue and 
  //  Alpha as color values
  SDL_SetRenderDrawColor(g_pRenderer, 0, 0, 0, 255);

  // clear the window to black
  SDL_RenderClear(g_pRenderer);

  // show the window
  SDL_RenderPresent(g_pRenderer);

  // set a delay before quitting
  SDL_Delay(5000);

  // clean up SDL
  SDL_Quit();

  return 0;
}</pre></div><p>We can now attempt to build our first SDL application. Right-click on the project and choose <span class="strong"><strong>Build</strong></span>. There will be an <a class="indexterm" id="id29"/>error about the <code class="literal">SDL.dll</code> file not being found:</p><div class="mediaobject"><img alt="Hello SDL" src="graphics/6821OT_01_07.jpg"/></div><p>The attempted build should have created a <code class="literal">Debug</code> or <code class="literal">Release</code> folder within the project directory (usually located in your <code class="literal">Documents</code> folder under visual studio and projects). This folder contains the <code class="literal">.exe</code> file from our attempted build; we need to add the <code class="literal">SDL.dll</code> file to this folder. The <code class="literal">SDL.dll</code> file is located at <code class="literal">C:\SDL2\VisualC\SDL\Win32</code> (or <code class="literal">x64)\Release\SDL.dll l</code>). When you want to distribute your game to another computer, you will have to share this file as well as the executable. After you have added the <code class="literal">SDL.dll</code> file to the executable folder, the project will now compile and show an SDL window; wait for 5 seconds and then close.</p><div class="section" title="An overview of Hello SDL"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>An overview of Hello SDL</h2></div></div></div><p>Let's go through<a class="indexterm" id="id30"/> the <code class="literal">Hello SDL</code> code:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, we included the <code class="literal">SDL.h</code> header file so that we have access to all of SDL's functions:<div class="informalexample"><pre class="programlisting">#include&lt;SDL.h&gt;</pre></div></li><li class="listitem">The next step is to create some global variables. One is a pointer to an <code class="literal">SDL_Window</code> function, <a class="indexterm" id="id31"/>which will be set using the <code class="literal">SDL_CreateWindow</code> function. The second is a pointer to an <code class="literal">SDL_Renderer</code> object; set using the <code class="literal">SDL_CreateRenderer</code> function:<div class="informalexample"><pre class="programlisting">SDL_Window* g_pWindow = 0;
SDL_Renderer* g_pRenderer = 0;</pre></div></li><li class="listitem">We can now initialize SDL. This example initializes all of SDL's subsystems using the <code class="literal">SDL_INIT_EVERYTHING</code> flag, but this does not always have to be the case (see SDL initialization flags):<div class="informalexample"><pre class="programlisting">int main(int argc, char* argv[])
{
  // initialize SDL
  if(SDL_Init(SDL_INIT_EVERYTHING) &gt;= 0)
   {</pre></div></li><li class="listitem">If the SDL initialization<a class="indexterm" id="id32"/> was successful, we can create the pointer to our window. <code class="literal">SDL_CreateWindow</code> returns a pointer to a window matching the passed parameters. The parameters are the window title, <span class="emphasis"><em>x</em></span> position of the window, <span class="emphasis"><em>y</em></span> position of the window, width, height, and any required <code class="literal">SDL_flags</code> (we will cover these later in the chapter). <code class="literal">SDL_WINDOWPOS_CENTERED</code> will center our window relative to the screen:<div class="informalexample"><pre class="programlisting">// if succeeded create our window
g_pWindow = SDL_CreateWindow("Chapter 1: Setting up SDL", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 640, 480, SDL_WINDOW_SHOWN);</pre></div></li><li class="listitem">We can now check whether the window creation was successful, and if so, move on to set the pointer to our renderer, passing the window we want the renderer to use as a parameter; in our case, it is the newly created <code class="literal">g_pWindow</code> pointer. The second parameter passed is the index of the rendering driver to initialize; in this case, we use <code class="literal">-1</code> to use the first capable driver. The final parameter is <code class="literal">SDL_RendererFlag</code> (see SDL renderer flags):<div class="informalexample"><pre class="programlisting">// if the window creation succeeded create our renderer
if(g_pWindow != 0)
{
  g_pRenderer = SDL_CreateRenderer(g_pWindow, -1, 0);
}
else
{
  return 1; // sdl could not initialize
}</pre></div></li><li class="listitem">If everything was successful, we can now create and show our window:<div class="informalexample"><pre class="programlisting">// everything succeeded lets draw the window

  // set to black
SDL_SetRenderDrawColor(g_pRenderer, 0, 0, 0, 255);

   // clear the window to black
SDL_RenderClear(g_pRenderer);

   // show the window
SDL_RenderPresent(g_pRenderer);

   // set a delay before quitting
SDL_Delay(5000);

   // clean up SDL
SDL_Quit();</pre></div></li></ol></div></div><div class="section" title="SDL initialization flags"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>SDL initialization flags</h2></div></div></div><p>Event handling, file I/O, and threading <a class="indexterm" id="id33"/>subsystems are all initialized <a class="indexterm" id="id34"/>by default in SDL. Other subsystems can be initialized using the following flags:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Flag</p>
</th><th style="text-align: left" valign="bottom">
<p>Initialized subsystem(s)</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_INIT_HAPTIC</code>
<a class="indexterm" id="id35"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Force feedback subsystem<a class="indexterm" id="id36"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_INIT_AUDIO</code>
<a class="indexterm" id="id37"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Audio subsystem<a class="indexterm" id="id38"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_INIT_VIDEO</code>
<a class="indexterm" id="id39"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Video subsystem<a class="indexterm" id="id40"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_INIT_TIMER</code>
<a class="indexterm" id="id41"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Timer subsystem<a class="indexterm" id="id42"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_INIT_JOYSTICK</code>
<a class="indexterm" id="id43"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Joystick subsystem<a class="indexterm" id="id44"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_INIT_EVERYTHING</code>
<a class="indexterm" id="id45"/>
</p>
</td><td style="text-align: left" valign="top">
<p>All subsystems<a class="indexterm" id="id46"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_INIT_NOPARACHUTE</code>
<a class="indexterm" id="id47"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Don't catch fatal signals<a class="indexterm" id="id48"/>
</p>
</td></tr></tbody></table></div><p>We can also use bitwise (<code class="literal">|</code>) to initialize more than one subsystem. To initialize only the audio and video subsystems, we can use a call to <code class="literal">SDL_Init</code>, for example:</p><div class="informalexample"><pre class="programlisting">SDL_Init(SDL_INIT_AUDIO | SDL_INIT_VIDEO);</pre></div><p>Checking whether a subsystem has been initialized or not can be done with a call to<a class="indexterm" id="id49"/> the <code class="literal">SDL_WasInit()</code> function:</p><div class="informalexample"><pre class="programlisting">if(SDL_WasInit(SDL_INIT_VIDEO) != 0)
{
  cout &lt;&lt; "video was initialized";
}</pre></div></div><div class="section" title="SDL renderer flags"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>SDL renderer flags</h2></div></div></div><p>When initializing an <code class="literal">SDL_Renderer</code> flag, <a class="indexterm" id="id50"/>we can pass in a flag to determine its behavior. The following table describes each flag's purpose:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Flag</p>
</th><th style="text-align: left" valign="bottom">
<p>Purpose</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_RENDERER_SOFTWARE</code>
<a class="indexterm" id="id51"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Use software rendering<a class="indexterm" id="id52"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_RENDERER_ACCELERATED</code>
<a class="indexterm" id="id53"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Use hardware acceleration<a class="indexterm" id="id54"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_RENDERER_PRESENTVSYNC</code>
<a class="indexterm" id="id55"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Synchronize renderer update with screen's refresh rate<a class="indexterm" id="id56"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SDL_RENDERER_TARGETTEXTURE</code>
<a class="indexterm" id="id57"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Supports render to texture<a class="indexterm" id="id58"/>
</p>
</td></tr></tbody></table></div></div></div></body></html>